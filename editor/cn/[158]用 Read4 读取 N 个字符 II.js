//ç»™ä½ ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”è¯¥æ–‡ä»¶åªèƒ½é€šè¿‡ç»™å®šçš„ read4 æ–¹æ³•æ¥è¯»å–ï¼Œè¯·å®žçŽ°ä¸€ä¸ªæ–¹æ³•ä½¿å…¶èƒ½å¤Ÿè¯»å– n ä¸ªå­—ç¬¦ã€‚æ³¨æ„ï¼šä½ çš„ read æ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ã€‚ 
//
// read4 çš„å®šä¹‰ï¼š 
//
// read4 API ä»Žæ–‡ä»¶ä¸­è¯»å– 4 ä¸ªè¿žç»­çš„å­—ç¬¦ï¼Œç„¶åŽå°†è¿™äº›å­—ç¬¦å†™å…¥ç¼“å†²åŒºæ•°ç»„ buf4 ã€‚ 
//
// è¿”å›žå€¼æ˜¯è¯»å–çš„å®žé™…å­—ç¬¦æ•°ã€‚ 
//
// è¯·æ³¨æ„ï¼Œread4() æœ‰å…¶è‡ªå·±çš„æ–‡ä»¶æŒ‡é’ˆï¼Œç±»ä¼¼äºŽ C ä¸­çš„ FILE * fp ã€‚ 
//
// 
//å‚æ•°ç±»åž‹: char[] buf4
//è¿”å›žç±»åž‹: int
//
//æ³¨æ„: buf4[] æ˜¯ç›®æ ‡ç¼“å­˜åŒºä¸æ˜¯æºç¼“å­˜åŒºï¼Œread4 çš„è¿”å›žç»“æžœå°†ä¼šå¤åˆ¶åˆ° buf4[] å½“ä¸­ã€‚
// 
//
// ä¸‹åˆ—æ˜¯ä¸€äº›ä½¿ç”¨ read4 çš„ä¾‹å­ï¼š 
//
// 
//
// 
//File file("abcde"); // æ–‡ä»¶åä¸º "abcde"ï¼Œ åˆå§‹æ–‡ä»¶æŒ‡é’ˆ (fp) æŒ‡å‘ 'a' 
//char[] buf4 = new char[4]; // åˆ›å»ºä¸€ä¸ªç¼“å­˜åŒºä½¿å…¶èƒ½å®¹çº³è¶³å¤Ÿçš„å­—ç¬¦
//read4(buf4); // read4 è¿”å›ž 4ã€‚çŽ°åœ¨ buf4 = "abcd"ï¼Œfp æŒ‡å‘ 'e'
//read4(buf4); // read4 è¿”å›ž 1ã€‚çŽ°åœ¨ buf4 = "e"ï¼Œfp æŒ‡å‘æ–‡ä»¶æœ«å°¾
//read4(buf4); // read4 è¿”å›ž 0ã€‚çŽ°åœ¨ buf4 = ""ï¼Œfp æŒ‡å‘æ–‡ä»¶æœ«å°¾ 
//
// read æ–¹æ³•ï¼š 
//
// é€šè¿‡ä½¿ç”¨ read4 æ–¹æ³•ï¼Œå®žçŽ° read æ–¹æ³•ã€‚è¯¥æ–¹æ³•å¯ä»¥ä»Žæ–‡ä»¶ä¸­è¯»å– n ä¸ªå­—ç¬¦å¹¶å°†å…¶å­˜å‚¨åˆ°ç¼“å­˜æ•°ç»„ buf ä¸­ã€‚æ‚¨ ä¸èƒ½ ç›´æŽ¥æ“ä½œæ–‡ä»¶ã€‚ 
//
// è¿”å›žå€¼ä¸ºå®žé™…è¯»å–çš„å­—ç¬¦ã€‚ 
//
// read çš„å®šä¹‰ï¼š 
//
// 
//å‚æ•°:   char[] buf, int n
//è¿”å›žå€¼: int
//
//æ³¨æ„: buf[] æ˜¯ç›®æ ‡ç¼“å­˜åŒºä¸æ˜¯æºç¼“å­˜åŒºï¼Œä½ éœ€è¦å°†ç»“æžœå†™å…¥ buf[] ä¸­ã€‚
// 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//File file("abc");
//Solution sol;
//// å‡å®š buf å·²ç»è¢«åˆ†é…äº†å†…å­˜ï¼Œå¹¶ä¸”æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥å­˜å‚¨æ–‡ä»¶ä¸­çš„æ‰€æœ‰å­—ç¬¦ã€‚
//sol.read(buf, 1); // å½“è°ƒç”¨äº†æ‚¨çš„ read æ–¹æ³•åŽï¼Œbuf éœ€è¦åŒ…å« "a"ã€‚ ä¸€å…±è¯»å– 1 ä¸ªå­—ç¬¦ï¼Œå› æ­¤è¿”å›ž 1ã€‚
//sol.read(buf, 2); // çŽ°åœ¨ buf éœ€è¦åŒ…å« "bc"ã€‚ä¸€å…±è¯»å– 2 ä¸ªå­—ç¬¦ï¼Œå› æ­¤è¿”å›ž 2ã€‚
//sol.read(buf, 1); // ç”±äºŽå·²ç»åˆ°è¾¾äº†æ–‡ä»¶æœ«å°¾ï¼Œæ²¡æœ‰æ›´å¤šçš„å­—ç¬¦å¯ä»¥è¯»å–ï¼Œå› æ­¤è¿”å›ž 0ã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//File file("abc");
//Solution sol;
//sol.read(buf, 4); // å½“è°ƒç”¨äº†æ‚¨çš„ read æ–¹æ³•åŽï¼Œbuf éœ€è¦åŒ…å« "abc"ã€‚ ä¸€å…±åªèƒ½è¯»å– 3 ä¸ªå­—ç¬¦ï¼Œå› æ­¤è¿”å›ž 3ã€‚
//sol.read(buf, 1); // ç”±äºŽå·²ç»åˆ°è¾¾äº†æ–‡ä»¶æœ«å°¾ï¼Œæ²¡æœ‰æ›´å¤šçš„å­—ç¬¦å¯ä»¥è¯»å–ï¼Œå› æ­¤è¿”å›ž 0ã€‚
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// ä½  ä¸èƒ½ ç›´æŽ¥æ“ä½œè¯¥æ–‡ä»¶ï¼Œæ–‡ä»¶åªèƒ½é€šè¿‡ read4 èŽ·å–è€Œ ä¸èƒ½ é€šè¿‡ readã€‚ 
// read å‡½æ•°å¯ä»¥è¢«è°ƒç”¨ å¤šæ¬¡ã€‚ 
// è¯·è®°å¾— é‡ç½® åœ¨ Solution ä¸­å£°æ˜Žçš„ç±»å˜é‡ï¼ˆé™æ€å˜é‡ï¼‰ï¼Œå› ä¸ºç±»å˜é‡ä¼š åœ¨å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­ä¿æŒä¸å˜ï¼Œå½±å“åˆ¤é¢˜å‡†ç¡®ã€‚è¯· æŸ¥é˜… è¿™é‡Œã€‚ 
// ä½ å¯ä»¥å‡å®šç›®æ ‡ç¼“å­˜æ•°ç»„ buf ä¿è¯æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜ä¸‹ n ä¸ªå­—ç¬¦ã€‚ 
// ä¿è¯åœ¨ä¸€ä¸ªç»™å®šæµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œread å‡½æ•°ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ª bufã€‚ 
// 
// Related Topics å­—ç¬¦ä¸² 
// ðŸ‘ 34 ðŸ‘Ž 0


//leetcode submit region begin(Prohibit modification and deletion)
/**
 * Definition for read4()
 *
 * @param {character[]} buf Destination buffer
 * @return {number} The number of characters read
 * read4 = function(buf4) {
 *     ...
 * };
 */

/**
 * @param {function} read4()
 * @return {function}
 */
var solution = function (read4) {
    /**
     * @param {character[]} buf Destination buffer
     * @param {number} n Number of characters to read
     * @return {number} The number of actual characters read
     */
    let buffer = [];
    let readOffset = 0;
    let bufferSize = 0;
    const getNextChar = () => {
        if (readOffset === bufferSize) {
            bufferSize = read4(buffer);
            readOffset = 0;
            if (bufferSize === 0) {
                return 0;
            }
        }
        return buffer[readOffset++];
    };
    return function (buf, n) {
        for (let i = 0; i < n; i++) {
            let next = getNextChar();
            if (next === 0) {
                return 0;
            } else {
                buf[i] = next;
            }
        }
        return n;
    };
};
//leetcode submit region end(Prohibit modification and deletion)
